import{a as P}from"./chunk-ZPZ2T7FA.js";import{l as B}from"./chunk-E3QJHROL.js";import{a as A,b as G,c as v,d as M,e as U,g as q,h as R,i as j,j as O,l as V}from"./chunk-FEVAYTOF.js";import"./chunk-NWNFJGB3.js";import{c as L,y as D,z as I}from"./chunk-TDGSGNOU.js";import{b as k,c as E,d as N}from"./chunk-CDINY2RQ.js";import{Gb as C,Hb as S,Kb as x,Qb as p,Rb as T,Sb as d,Va as i,_b as F,aa as f,bc as a,cc as l,db as w,ib as _,ob as b,sb as g,xb as o,yb as r,zb as h}from"./chunk-QJSMLD4S.js";var $=(e,n)=>({"border-red-500 ring-1 ring-red-500":e,"border-gray-300 focus:ring-blue-500 focus:border-blue-500":n});function H(e,n){e&1&&(o(0,"p",27),p(1),a(2,"translate"),r()),e&2&&(i(),T(l(2,1,"auth.login.userNameisrequired")))}function J(e,n){if(e&1&&(o(0,"div",11),_(1,H,3,3,"p",27),r()),e&2){let m,t=S();i(),g((m=t.loginForm.get("userName"))!=null&&m.getError("required")?1:-1)}}function K(e,n){e&1&&(o(0,"p",11),p(1),a(2,"translate"),r()),e&2&&(i(),d(" ",l(2,1,"auth.login.passwordisrequired")," "))}function Q(e,n){e&1&&(o(0,"p",11),p(1),a(2,"translate"),r()),e&2&&(i(),d(" ",l(2,1,"auth.login.passwordmustbeatleast6characters")," "))}function W(e,n){e&1&&(o(0,"p",11),p(1),a(2,"translate"),r()),e&2&&(i(),d(" ",l(2,1,"auth.login.Passwordcanonlycontainenglishletters,numbers,andunderscores")," "))}function X(e,n){if(e&1&&(o(0,"div",15),_(1,K,3,3,"p",11)(2,Q,3,3,"p",11)(3,W,3,3,"p",11),r()),e&2){let m,t,s,u=S();i(),g((m=u.loginForm.get("password"))!=null&&m.getError("required")?1:-1),i(),g((t=u.loginForm.get("password"))!=null&&t.getError("minlength")?2:-1),i(),g((s=u.loginForm.get("password"))!=null&&s.getError("pattern")?3:-1)}}function Y(e,n){e&1&&(p(0),a(1,"translate")),e&2&&d(" ",l(1,1,"auth.login.loading...")," ")}function Z(e,n){e&1&&(p(0),a(1,"translate")),e&2&&d(" ",l(1,1,"auth.login.login")," ")}var z=class e{isloading=!1;destroyLoginData;_FormBuilder=f(O);_AuthService=f(P);_ToastrService=f(B);_Router=f(D);_TranslateService=f(k);destoryUserData;destoryGustData;loginForm=this._FormBuilder.group({companyId:[1],branchId:[1],userName:[null,[v.required,v.minLength(3)]],password:[null,[v.required,v.pattern(/^\w{6,}$/)]],rememberMe:[!0]});guestData={companyId:1,branchId:1,userName:"Admin",password:"Admin123",rememberMe:!1};sendLodinData(){this.isloading=!0,this.destoryUserData=this._AuthService.sendLoginData(this.loginForm.value).subscribe({next:n=>{console.log(n),this._ToastrService.success(this._TranslateService.instant("auth.loginSuccess"),this._TranslateService.instant("auth.successTitle")),this.isloading=!1,localStorage.setItem("userToken",n.Obj.AccessToken),console.log(localStorage.getItem("userToken")),this._Router.navigate(["/home"])},error:n=>{console.log(n),this._ToastrService.error(this._TranslateService.instant("auth.loginError")),this.isloading=!1}})}guestLogin(){this.destoryGustData=this._AuthService.sendLoginData(this.guestData).subscribe({next:n=>{console.log(n),localStorage.setItem("guestToken",n.Obj.AccessToken),this._Router.navigate(["/guest/home"])},error:n=>{console.log(n)}})}ngOnDestroy(){this.destoryUserData&&this.destoryUserData.unsubscribe(),this.destoryGustData&&this.destoryGustData.unsubscribe()}static \u0275fac=function(m){return new(m||e)};static \u0275cmp=w({type:e,selectors:[["app-login"]],decls:44,vars:37,consts:[[1,"login-section"],[1,"image"],["src","./assets/images/Background/Auth.png","alt","",1,""],[1,"login-wrapper"],[1,"login-card"],[1,"login-title","font-semibold","font-serif"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"inputInfo"],[1,"input-group"],[1,"fa-solid","fa-user","input-icon","iconsColor"],["formControlName","userName","type","text",1,"input-field","form-control","block","w-full","px-3","py-2","rounded-md","shadow-sm","sm:text-sm",3,"ngClass","placeholder"],[1,"bg-red-100","border","border-red-400","text-red-700","px-2","py-1","rounded-md"],[1,"input-info"],[1,"fa-solid","fa-key","input-icon","iconsColor"],["type","password","formControlName","password",1,"input-field","form-control",3,"ngClass","placeholder"],[1,"mt-2","space-y-1"],[1,"options-row"],[1,"flex","items-center","space-x-2"],["formControlName","rememberMe","type","checkbox","checked","",1,"w-4","h-4","text-green-600","border-gray-300","rounded","focus:ring-green-500","focus:ring-2"],[1,"text-sm","px-1"],[1,"links"],["routerLink","/auth/forgetpassword"],["type","button",1,"login-button","disabled:bg-gray-400","disabled:cursor-not-allowed","disabled:pointer-events-none",3,"click","disabled"],[1,"divider"],["type","button",1,"w-full","m-auto","px-4","py-2","rounded-2xl","font-serif","font-semibold","text-blue-800","transition-all","bg-gray-100","hover:bg-gray-400","mt-0","flex","items-center","justify-center",3,"click"],[1,"text-center"],["type","button","routerLink","/auth/register",1,"links","text-blue-500"],[1,""]],template:function(m,t){if(m&1&&(o(0,"section",0)(1,"div",1),h(2,"img",2),r(),o(3,"div",3)(4,"div",4)(5,"h2",5),p(6),a(7,"translate"),r(),o(8,"form",6),C("ngSubmit",function(){return t.sendLodinData()}),o(9,"div",7)(10,"div",8),h(11,"i",9)(12,"input",10),a(13,"translate"),r(),_(14,J,2,1,"div",11),r(),o(15,"div",12)(16,"div",8),h(17,"i",13)(18,"input",14),a(19,"translate"),r(),_(20,X,4,3,"div",15),r(),o(21,"div",16)(22,"label",17),h(23,"input",18),o(24,"span",19),p(25),a(26,"translate"),r()(),o(27,"div",20)(28,"a",21),p(29),a(30,"translate"),r()()(),o(31,"button",22),C("click",function(){return t.sendLodinData()}),_(32,Y,2,3)(33,Z,2,3),r(),h(34,"hr",23),o(35,"button",24),C("click",function(){return t.guestLogin()}),p(36),a(37,"translate"),r(),o(38,"p",25),p(39),a(40,"translate"),o(41,"a",26),p(42),a(43,"translate"),r()()()()()()),m&2){let s,u,c,y;i(6),d(" ",l(7,15,"auth.login.loginnow")," "),i(2),b("formGroup",t.loginForm),i(4),x("placeholder",l(13,17,"auth.login.username")),b("ngClass",F(31,$,((s=t.loginForm.get("userName"))==null?null:s.touched)&&((s=t.loginForm.get("userName"))==null?null:s.invalid),!((s=t.loginForm.get("userName"))!=null&&s.touched&&((s=t.loginForm.get("userName"))!=null&&s.invalid)))),i(2),g((u=t.loginForm.get("userName"))!=null&&u.touched&&((u=t.loginForm.get("userName"))!=null&&u.errors)?14:-1),i(4),x("placeholder",l(19,19,"auth.login.password")),b("ngClass",F(34,$,((c=t.loginForm.get("password"))==null?null:c.touched)&&((c=t.loginForm.get("password"))==null?null:c.invalid),!((c=t.loginForm.get("password"))!=null&&c.touched&&((c=t.loginForm.get("password"))!=null&&c.invalid)))),i(2),g((y=t.loginForm.get("password"))!=null&&y.touched&&((y=t.loginForm.get("password"))!=null&&y.invalid)?20:-1),i(5),d(" ",l(26,21,"auth.login.rememberme"),""),i(4),d(" ",l(30,23,"auth.login.forgetpassword?"),""),i(2),b("disabled",t.loginForm.invalid||t.isloading),i(),g(t.isloading?32:33),i(4),d(" ",l(37,25,"auth.login.continueasguest")," "),i(3),d(" ",l(40,27,"auth.login.notamember")," "),i(3),d(" ",l(43,29,"auth.login.registernow"),"")}},dependencies:[I,V,q,G,A,M,U,R,j,L,N,E],encapsulation:2})};export{z as LoginComponent};
