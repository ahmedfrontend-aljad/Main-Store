import{a as Y,b as Z}from"./chunk-IOHK44EJ.js";import{l as q}from"./chunk-E3QJHROL.js";import{a as tt}from"./chunk-ZDGHHDPZ.js";import{b as H,d as J,f as K,k as X}from"./chunk-FEVAYTOF.js";import"./chunk-NWNFJGB3.js";import{w as G,y as W,z as V}from"./chunk-TDGSGNOU.js";import{c as z,d as Q}from"./chunk-CDINY2RQ.js";import{Ab as U,Bb as L,Cb as A,Gb as B,Hb as m,Kb as N,Qb as c,Ra as w,Rb as S,Sb as _,Ub as R,Va as o,Vb as $,Wb as j,Yb as M,Zb as h,aa as d,bc as C,cc as f,db as E,g as P,ha as T,ia as F,ib as I,ob as y,sb as b,tb as k,va as O,vb as u,wb as g,xb as r,yb as a,zb as p}from"./chunk-QJSMLD4S.js";var et=e=>["/details",e],ot=e=>({from:e}),rt=()=>[1,2,3,4,5],at=()=>[],D=(e,i)=>i.Id,st=(e,i)=>i.Image;function ct(e,i){if(e&1&&p(0,"img",26),e&2){let t=i.$implicit,n=m(3).$implicit;y("src","data:image/jpeg;base64,"+t.Image,w)("alt",n.NameAr)}}function lt(e,i){if(e&1&&u(0,ct,1,2,"img",26,st),e&2){let t=i.$implicit;g(t.ItemImages)}}function pt(e,i){if(e&1&&u(0,lt,2,0,null,null,D),e&2){let t=m().$implicit;g(t.ItemUnits)}}function mt(e,i){if(e&1&&p(0,"img",15),e&2){let t=m().$implicit;y("alt",t.NameAr)}}function dt(e,i){e&1&&p(0,"i",27)}function ut(e,i){if(e&1&&(U(0),I(1,dt,1,0,"i",27),L()),e&2){let t=i.$implicit,n=m(2);o(),b(t<=n.math.floor(t)?1:-1)}}function gt(e,i){if(e&1){let t=A();r(0,"button",28),B("click",function(){let l=T(t).$implicit,s=m(2);return F(s.addToCart(l.Id,l.Price,1))}),c(1),C(2,"translate"),a()}e&2&&(o(),_(" \u{1F6D2} ",f(2,1,"products.addtocart")," "))}function _t(e,i){if(e&1&&(r(0,"div",10)(1,"div",11)(2,"div",12),p(3,"i",13),a(),r(4,"div",14),I(5,pt,2,0)(6,mt,1,1,"img",15),a(),r(7,"div",16)(8,"div",17)(9,"div",18)(10,"h3"),c(11),a()(),r(12,"div",19),p(13,"img",20),r(14,"span"),c(15),C(16,"translate"),a()(),r(17,"div",21)(18,"span",22),c(19),a(),r(20,"span",23),c(21),a()(),r(22,"div",24),u(23,ut,2,1,"ng-container",null,k),a()(),u(25,gt,3,3,"button",25,D),a()()()),e&2){let t=i.$implicit,n=m();o(4),y("routerLink",h(10,et,t.Id)),o(),b(n.hasImages(t)?5:6),o(3),y("routerLink",h(12,et,t.Id))("state",h(14,ot,n.currentUrl)),o(3),S(t.NameAr),o(4),S(f(16,8,"products.brandname")),o(4),_(" ",t.price," EGP "),o(2),_(" ",t.price+20," EGP "),o(2),g(M(16,rt)),o(2),g(t.ItemUnits.slice(0,1)||M(17,at))}}var it=class e{_CategoriesService=d(tt);_ToastrService=d(q);_CartService=d(Z);_ActivatedRoute=d(G);_Router=d(W);currentUrl="";itemsInCategories=O([]);text="";math=Math;subscriptions=new P;ngOnInit(){this.currentUrl=this._Router.url;let i=this._ActivatedRoute.paramMap.subscribe({next:t=>{let n=t.get("code");if(n){let l=this._CategoriesService.getAllCategories().subscribe({next:s=>{let v=s.Obj.ItemGroups.find(x=>x.Code===n);v&&this.itemsInCategories.set(v.Item)},error:s=>console.log(s)});this.subscriptions.add(l)}}});this.subscriptions.add(i)}get filteredItems(){return this.itemsInCategories().filter(i=>i.NameEn?.toLowerCase().includes(this.text.toLowerCase()))}addToCart(i,t,n=1,l){console.log("unitId:",i),console.log("price object:",t);let s=localStorage.getItem("userToken");if(!s){this._Router.navigate(["/login"]);return}let v={UserId:Y(s).Id,ProductId:i,Quantity:n,Price:t};this._CartService.addToCart(v).subscribe({next:x=>{this._ToastrService.success(x.Message),console.log("ItemUnits:",l.ItemUnits)},error:x=>{this._ToastrService.error(x.Message)}})}hasImages(i){return i.ItemUnits?.some(t=>t.ItemImages&&t.ItemImages.length>0)??!1}ngOnDestroy(){this.subscriptions.unsubscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=E({type:e,selectors:[["app-category-details"]],decls:18,vars:10,consts:[[1,"container","m-auto"],[1,"w-full","mt-16","products"],[1,"heading","text-center"],[1,"mt-8","font-weight-bolder","font-serif","text-4xl"],[1,"mb-8","mt-1","text-yellow-50","text-1xl"],[1,"input-group","m-auto","text-center","relative"],["type","search",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","btn-outline-secondary"],[1,"fa-solid","fa-magnifying-glass","absolute","text-white","iconSearch"],[1,"section-content","mt-16","grid","gap-6","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","xl:grid-cols-5"],[1,"flex","justify-center"],[1,"product-card","px-1"],[1,"wishIcon","px-2","text-right","py-1"],[1,"fa-solid","fa-heart","fa-heart","text-xl","cursor-pointer"],[1,"image-container","cursor-pointer",3,"routerLink"],["src","assets/images/Product.png",3,"alt"],[1,"product-body"],[1,"cursor-pointer",3,"routerLink","state"],[1,"product-title"],[1,"brand"],["src","./assets/images/OIP.webp","alt","Brand Logo"],[1,"price"],[1,"current-price"],[1,"old-price"],[1,"rating"],[1,"add-to-cart"],[3,"src","alt"],[1,"fa-solid","fa-star","rating-color"],[1,"add-to-cart",3,"click"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"section")(2,"div",1)(3,"div",2)(4,"h3",3),c(5),C(6,"translate"),a(),r(7,"p",4),c(8),C(9,"translate"),a()(),r(10,"div",5)(11,"input",6),C(12,"translate"),j("ngModelChange",function(s){return $(n.text,s)||(n.text=s),s}),a(),r(13,"button",7),p(14,"i",8),a()(),r(15,"div",9),u(16,_t,27,18,"div",10,D),a()()()()),t&2&&(o(5),_(" ",f(6,4,"homecomponent.mostpurchasedproducts")," "),o(3),_(" ",f(9,6,"homecomponent.enjoythemostpopularproducts")," "),o(3),N("placeholder",f(12,8,"homecomponent.searchbyproductname")),R("ngModel",n.text),o(5),g(n.itemsInCategories()))},dependencies:[V,X,H,J,K,Q,z],styles:[".input-group[_ngcontent-%COMP%]   .fa-magnifying-glass[_ngcontent-%COMP%]{left:39%!important;top:14px!important}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:40%!important;margin:auto!important;text-align:center!important;border-radius:999px!important}@media (max-width: 768px){.products[_ngcontent-%COMP%]{margin-top:0}.input-group[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]   .fa-magnifying-glass[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%!important}.heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem!important;margin-top:0!important}.heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}}"]})};export{it as CategoryDetailsComponent};
