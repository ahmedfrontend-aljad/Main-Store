import{a as w}from"./chunk-IQD7P6OP.js";import{a as D,b as ae}from"./chunk-IOHK44EJ.js";import{l as te}from"./chunk-E3QJHROL.js";import{b as ne,d as ie,f as oe,k as re}from"./chunk-FEVAYTOF.js";import"./chunk-NWNFJGB3.js";import{k as K,y as X,z as Y}from"./chunk-TDGSGNOU.js";import{c as Z,d as ee}from"./chunk-CDINY2RQ.js";import{Ab as W,Bb as G,Cb as y,Gb as h,Hb as p,Kb as H,Qb as c,Ra as B,Rb as A,Sb as f,Ub as Q,Va as r,Vb as q,Wb as J,Yb as S,Zb as T,aa as g,bc as b,cc as C,db as I,ha as v,ia as P,ib as O,ja as E,ka as j,ob as _,qa as L,rb as z,sb as N,tb as R,ub as V,va as U,vb as m,wb as u,xb as o,yb as a,za as $,zb as d}from"./chunk-QJSMLD4S.js";function me(n,e){if(n&1){let t=y();o(0,"li")(1,"button",8),h("click",function(){let l=v(t).$implicit,s=p();return P(s.goToPage(l))}),c(2),a()()}if(n&2){let t=e.$implicit,i=p();r(),z("flex items-center justify-center px-5 h-8 leading-tight border transition-all duration-200 "+(t===i.pageNumber?"z-10 text-white bg-green-500 border-green-500 shadow-md scale-110":"text-gray-700 bg-white/70 border-gray-300 hover:bg-green-50 hover:text-green-700")),r(),f(" ",t," ")}}var k=class n{_AllProductsService=g(w);totalPages=[];pageNumber=1;pageSize=50;pageChanged=new L;ngOnInit(){this._AllProductsService.getPagedItem(this.pageNumber,this.pageSize).subscribe({next:e=>{let t=Math.ceil(e.Obj.TotalCount/this.pageSize);this.totalPages=Array.from({length:t},(i,l)=>l+1),console.log("total Pages",this.totalPages)},error:e=>{console.log(e)}})}goToPage(e){e<1||e>this.totalPages.length||(this.pageNumber=e,this.pageChanged.emit(this.pageNumber))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["app-pagination"]],outputs:{pageChanged:"pageChanged"},decls:16,vars:2,consts:[["aria-label","Page navigation example",1,"backdrop-blur-sm","bg-white/40","rounded-xl","shadow-md","p-2"],[1,"flex","items-center","-space-x-px","h-8","text-lg","font-bold"],[1,"flex","items-center","justify-center","px-5","h-8","ms-0","leading-tight","text-gray-600","bg-white/60","border","border-e-0","border-gray-300","rounded-s-xl","hover:bg-green-100","hover:text-green-700","transition-all","duration-200","disabled:opacity-40",3,"click","disabled"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"w-4","h-4","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 1 1 5l4 4"],[1,"flex","items-center","justify-center","px-5","h-8","leading-tight","text-gray-600","bg-white/60","border","border-gray-300","rounded-e-xl","hover:bg-green-100","hover:text-green-700","transition-all","duration-200","disabled:opacity-40",3,"click","disabled"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[3,"click"]],template:function(t,i){t&1&&(o(0,"nav",0)(1,"ul",1)(2,"li")(3,"button",2),h("click",function(){return i.goToPage(i.pageNumber-1)}),o(4,"span",3),c(5,"Previous"),a(),E(),o(6,"svg",4),d(7,"path",5),a()()(),m(8,me,3,3,"li",null,V),j(),o(10,"li")(11,"button",6),h("click",function(){return i.goToPage(i.pageNumber+1)}),o(12,"span",3),c(13,"Next"),a(),E(),o(14,"svg",4),d(15,"path",7),a()()()()()),t&2&&(r(3),_("disabled",i.pageNumber===1),r(5),u(i.totalPages),r(3),_("disabled",i.pageNumber===i.totalPages.length))},styles:["li[_ngcontent-%COMP%]{cursor:pointer}"]})};var le=n=>["/details",n],ue=n=>({from:n}),se=()=>[],ge=()=>[1,2,3,4,5],M=(n,e)=>e.Id,_e=(n,e)=>e.Image;function fe(n,e){if(n&1&&d(0,"img",26),n&2){let t=e.$implicit,i=p(3).$implicit;_("src","data:image/jpeg;base64,"+t.Image,B)("alt",i.NameAr)}}function he(n,e){if(n&1&&m(0,fe,1,2,"img",26,_e),n&2){let t=e.$implicit;u(t.ItemImages)}}function be(n,e){if(n&1&&m(0,he,2,0,null,null,M),n&2){let t=p().$implicit;u(t.ItemUnits)}}function Ce(n,e){if(n&1&&d(0,"img",17),n&2){let t=p().$implicit;_("alt",t.NameAr)}}function xe(n,e){if(n&1&&(o(0,"div",23)(1,"span",27),c(2),a(),o(3,"span",28),c(4),a()()),n&2){let t=e.$implicit;r(2),f(" ",t.Price," EGP "),r(2),f(" ",t.Price+20," EGP ")}}function ve(n,e){n&1&&d(0,"i",29)}function Pe(n,e){if(n&1&&(W(0),O(1,ve,1,0,"i",29),G()),n&2){let t=e.$implicit,i=p(2);r(),N(t<=i.math.floor(t)?1:-1)}}function Ie(n,e){if(n&1){let t=y();o(0,"button",30),h("click",function(){let l=v(t).$implicit,s=p().$implicit,F=p();return P(F.addToCart(s.Id,l.Price,1))}),c(1),b(2,"translate"),a()}n&2&&(r(),f(" \u{1F6D2} ",C(2,1,"products.addtocart")," "))}function ye(n,e){if(n&1&&(o(0,"div",10)(1,"div",13)(2,"div",14),d(3,"i",15),a(),o(4,"div",16),O(5,be,2,0)(6,Ce,1,1,"img",17),a(),o(7,"div",18)(8,"div",19)(9,"div",20)(10,"h3"),c(11),a()(),o(12,"div",21),d(13,"img",22),o(14,"span"),c(15),b(16,"translate"),a()(),m(17,xe,5,2,"div",23,M),o(19,"div",24),m(20,Pe,2,1,"ng-container",null,R),a()(),m(22,Ie,3,3,"button",25,M),a()()()),n&2){let t=e.$implicit,i=p();r(4),_("routerLink",T(8,le,t.Id)),r(),N(i.hasImages(t)?5:6),r(3),_("routerLink",T(10,le,t.Id))("state",T(12,ue,i.currentUrl)),r(3),A(t.NameAr),r(4),A(C(16,6,"products.brandname")),r(2),u(t.ItemUnits.slice(0,1)||S(14,se)),r(3),u(S(15,ge)),r(2),u(t.ItemUnits.slice(0,1)||S(16,se))}}var ce=class n{text="";math=Math;_AllProductsService=g(w);_Router=g(X);_ToastrService=g(te);currentUrl="";_CartService=g(ae);_PLATFORM_ID=g($);decoded;allProducts=U([]);pageNumber=1;pageSize=50;totalCount=0;destoryAllData;ngOnInit(){if(this.currentUrl=this._Router.url,K(this._PLATFORM_ID)){let e=localStorage.getItem("userToken");this.decoded=D(e),console.log(this.decoded)}this.loadItems()}get filteredItems(){return this.allProducts().filter(e=>e.NameAr?.toLowerCase().includes(this.text.toLowerCase())||e.NameEn?.toLowerCase().includes(this.text.toLowerCase()))}loadItems(){this._AllProductsService.getPagedItem(this.pageNumber,this.pageSize).subscribe({next:e=>{this.allProducts.set(e.Obj.PagedResult),this.totalCount=e.Obj.TotalCount,console.log(e)},error:e=>console.log(e)})}pagePagnation(e){this.pageNumber=e,this.loadItems()}addToCart(e,t,i=1){let l=localStorage.getItem("userToken");if(!l){console.error("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u0639\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644!"),localStorage.removeItem("userToken"),this._Router.navigate(["/login"]);return}let s=D(l),F={UserId:s.Id,ProductId:e,Quantity:i,Price:t};this._CartService.addToCart(F).subscribe({next:x=>{this._ToastrService.success(x.Message),console.log("Added to cart:",x),console.log(s.Id)},error:x=>{console.error(" Error while adding:",x),this._ToastrService.error(x.Message)}})}hasImages(e){return e.ItemUnits?.some(t=>t.ItemImages&&t.ItemImages.length>0)??!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["app-products"]],decls:21,vars:10,consts:[[1,"container","m-auto"],[1,"w-full","mt-16","products"],[1,"heading","text-center"],[1,"mt-8","font-weight-bolder","font-serif","text-4xl"],[1,"mb-8","mt-1","text-1xl"],[1,"input-group","m-auto","text-center","relative"],["type","search",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","btn-outline-secondary"],[1,"fa-solid","fa-magnifying-glass","iconSearch"],[1,"section-content","mt-16","grid","gap-6","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-4","xl:grid-cols-5"],[1,"flex","justify-center"],[1,"mt-12","flex","justify-center","align-middle"],[3,"pageChanged"],[1,"product-card","px-1"],[1,"wishIcon","px-2","text-right","py-1"],[1,"fa-solid","fa-heart","fa-heart","text-xl","cursor-pointer"],[1,"image-container","cursor-pointer",3,"routerLink"],["src","assets/images/Product.png",3,"alt"],[1,"product-body"],[1,"cursor-pointer",3,"routerLink","state"],[1,"product-title"],[1,"brand"],["src","./assets/images/OIP.webp","alt","Brand Logo"],[1,"price"],[1,"rating"],[1,"add-to-cart"],[3,"src","alt"],[1,"current-price"],[1,"old-price"],[1,"fa-solid","fa-star","rating-color"],[1,"add-to-cart",3,"click"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"section")(2,"div",1)(3,"div",2)(4,"h3",3),c(5),b(6,"translate"),a(),o(7,"p",4),c(8),b(9,"translate"),a()(),o(10,"div",5)(11,"input",6),b(12,"translate"),J("ngModelChange",function(s){return q(i.text,s)||(i.text=s),s}),a(),o(13,"button",7),d(14,"i",8),a()(),o(15,"div",9),m(16,ye,24,17,"div",10,M),a()()(),o(18,"section")(19,"div",11)(20,"app-pagination",12),h("pageChanged",function(s){return i.pagePagnation(s)}),a()()()()),t&2&&(r(5),f(" ",C(6,4,"homecomponent.mostpurchasedproducts")," "),r(3),f(" ",C(9,6,"homecomponent.enjoythemostpopularproducts")," "),r(3),H("placeholder",C(12,8,"homecomponent.searchbyproductname")),Q("ngModel",i.text),r(5),u(i.filteredItems))},dependencies:[re,ne,ie,oe,Y,k,ee,Z],styles:[".iconSearch[_ngcontent-%COMP%]{left:40%;top:30%;position:absolute}.form-control[_ngcontent-%COMP%]{width:50%!important;text-align:center;border-radius:999px}@media (max-width: 768px){.products[_ngcontent-%COMP%]{margin-top:0}.input-group[_ngcontent-%COMP%]{width:100%}.iconSearch[_ngcontent-%COMP%]{display:none}.form-control[_ngcontent-%COMP%]{width:100%!important}.heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem!important;margin-top:0!important}.heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}}"]})};export{ce as ProductsComponent};
